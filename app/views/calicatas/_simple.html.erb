<%= form_for(calicata, html: { class: 'simple span-24' }) do |f| %>

  <% if calicata.errors.any? %>
    <div id="mensaje_de_error" class="span-23">
      <h2><%= pluralize(@calicata.errors.count, "error") %> impide(n) que se guarde esta calicata:</h2>
      <ul>
        <% @calicata.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= field_set_tag 'Ficha de descripción edafológica', :class => 'span-23 last' do %>

    <div class="campo_suelto span-6 prepend-16 last">
      <div class="span-2"><%= f.label :numero, 'Sitio N°' %></div>
      <div class="span-3 append-1 last"><%= f.text_field :numero %></div>
    </div>

    <%= field_set_tag 'Ubicación', :class => 'span-22 last' do %>
      <div id="referencia" class="campo span-22 last">
        <div class="span-4"><%= f.label :referencia %></div>
        <div class="span-17 last"><%= f.text_field :referencia %></div>
      </div>
      <div id="ubicacion" class="campo span-16">
        <div class="span-4"><%= f.label :ubicacion, 'Latitud Longitud Altura (m)' %></div>
        <div class="span-12 last"><%= f.text_field :ubicacion %></div>
      </div>
      <div id="fotos" class="campo span-6 last">
        <div class="span-2"><%= f.label :numero_fotos, 'N° de fotos' %></div>
        <div class="span-3 last"><%= f.number_field :numero_fotos %></div>
      </div>
    <% end %>

    <%= field_set_tag 'Paisaje', :class => 'span-22 last' do %>
      <div id="unidad_geomorfologica" class="campo span-22 last">
        <div class="span-4"><%= f.label :unidad_geomorfologica %></div>
        <div class="span-17 last"><%= f.text_field :unidad_geomorfologica %></div>
      </div>
      <div id="posicion" class="campo span-16">
        <div class="span-4"><%= f.label :posicion %></div>
        <div class="span-12 last"><%= f.text_field :posicion %></div>
      </div>
      <div id="pendiente" class="campo span-6 last">
        <div class="span-2"><%= f.label :pendiente %></div>
        <div class="span-3 last"><%= f.text_field :pendiente %></div>
      </div>
      <div id="vegetacion" class="campo span-16">
        <div class="span-4"><%= f.label :vegetacion %></div>
        <div class="span-12 last"><%= f.text_field :vegetacion %></div>
      </div>
      <div id="cobertura" class="campo span-6 last">
        <div class="span-2"><%= f.label :cobertura %></div>
        <div class="span-3 last"><%= f.text_field :cobertura %></div>
      </div>
      <div id="material_original" class="campo span-22 last">
        <div class="span-4"><%= f.label :material_original %></div>
        <div class="span-17 last"><%= f.text_field :material_original %></div>
      </div>
    <% end %>

    <%= field_set_tag 'Perfil', :class => 'span-22 last' do %>
      <div id="taxonomia" class="campo span-22 last">
        <div class="span-4"><%= f.label :taxonomia, 'Clasificación taxonómica' %></div>
        <div class="span-17 last"><%= f.text_field :taxonomia %></div>
      </div>
      <div id="esquema" class="campo span-22 last">
        <div class="span-4"><%= f.label :esquema %></div>
        <div class="span-17 last"><%= f.text_field :esquema %></div>
      </div>
      <div class="campo span-22 last">
        <div class="span-2"><%= label_tag :tipo_n, 'Hz' %></div>
        <div class="span-2"><%= label_tag :profundidad_n, 'Prof. (cm)' %></div>
        <div class="span-5"><%= label_tag :estructura_n, 'Estructura' %></div>
        <div class="span-2"><%= label_tag :consistencia_s_n, 'Cons. seco' %></div>
        <div class="span-2"><%= label_tag :consistencia_h_n, 'Cons. húmedo' %></div>
        <div class="span-2"><label for="co3_n">CO<sub>3</sub></label></div>
        <div class="span-3"><%= label_tag :concreciones_n, 'Concr.' %></div>
        <div class="span-3 last"><%= label_tag :barnices_n, 'Barnices' %></div>
      </div>
      <% @calicata.horizontes.each do |horizonte| %>
        <div class="span-22 last">
        <%= f.fields_for horizonte, :index => horizonte do |horizonte_f|%>
          <div class="span-2"><%= horizonte_f.number_field :tipo %></div>
          <div class="span-2"><%= horizonte_f.number_field :profundidad %></div>
          <div class="span-5"><%= horizonte_f.text_field :estructura %></div>
          <div class="span-2"><%= horizonte_f.text_field :consistencia %></div>
          <div class="span-2"><%= horizonte_f.text_field :consistencia %></div>
          <div class="span-2"><%= horizonte_f.text_field :co3 %></div>
          <div class="span-3"><%= horizonte_f.text_field :concreciones %></div>
          <div class="span-3 last"><%= horizonte_f.text_field :barnices %></div>
        <% end %>
        </div>
      <% end %>
      <div id="horizonte_vacio" class="span-22 last">
        <div class="span-2"><%= number_field_tag :tipo_n %></div>
        <div class="span-2"><%= number_field_tag :profundidad_n %></div>
        <div class="span-5"><%= text_field_tag :estructura_n %></div>
        <div class="span-2"><%= text_field_tag :consistencia_s_n %></div>
        <div class="span-2"><%= text_field_tag :consistencia_h_n %></div>
        <div class="span-2"><%= text_field_tag :co3_n %></div>
        <div class="span-3"><%= text_field_tag :concreciones_n %></div>
        <div class="span-3 last"><%= text_field_tag :barnices_n %></div>
      </div>
    <% end %>

    <div class="acciones span-4 last">
      <%= f.submit %>
    </div>
  <% end %>

<% end %>
